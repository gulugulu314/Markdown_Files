# 一、矩阵

##1、矩阵是3D数学的重要基础;
>(1)主要描述坐标系之间的转换，通过定义一种运算将一个坐标系中的向量转换到另一个坐标系中；
>矩阵的表示：$\vec{M_{ij}}$ 表示具有i行j列的矩阵；

##2、方阵
- **方阵**：行数和列数相同的矩阵叫做方阵；
- *对角元素* ：行号和列号相同的元素叫对角元素；
- *非对角元素* ：其他元素；
- **对角矩阵** ： 所有非对角元素都为0的矩阵；
- **单位矩阵** ： 对角元素均为1，非对角元素均为0的矩阵; (任意矩阵乘以对角矩阵均为原矩阵)
- 向量可以作为矩阵，一个n维向量可以被称作1xn矩阵或者nx1矩阵；其中1xn矩阵被称为**行向量**，nx1矩阵成为**列向量**；

##3、矩阵的转置

矩阵转置表示：$M^T$,即将矩阵沿着对角线反转；
一个$m*n$的矩阵的转置矩阵可以表示为：$M_{mn}^T = M_{nm}$
例如：
$$
\left[
\begin{matrix}
    1 & 2 & 3\\
    4 & 5 & 6\\
    7 & 8 & 9
\end{matrix}
\right]^T =
\left[
\begin{matrix}
    1 & 4 & 7\\
    2 & 5 & 8\\
    3 & 6 & 9\\
\end{matrix}
\right]
$$

转置矩阵的两条引理：
>1、任意矩阵$M$, $(M^T)^T = M$ 经过两次转置后，变成自身；
>2、对角矩阵D的转置都是自身，$D^T = D$;单位矩阵也是如此；

## 4、矩阵的乘法
**(1) 标量与矩阵的乘法**
- 标量通常写在左边，不需要乘号，即用标量乘以矩阵的每个元素；
  
**(2) 矩阵与矩阵的乘法**
- 乘法必须有意义：矩阵A*B 条件是矩阵A的列数=矩阵B的行数
- 矩阵不满足交换律：$AB \not ={BA}$
- 矩阵满足结合律：$(AB)C = A(BC)$
- 矩阵积的转置相当于先主转置矩阵后，在以相反的顺序相称；即$(AB)^T = B^TA^T$;
  
**(3) 向量与矩阵的乘法**
- 行向量左乘矩阵，结果是行向量；
- 列向量右乘矩阵，结果是列向量；
- 其他组合不可行；
  
**(4)列向量和行向量的区别**
- 行向量左乘和列向量右成得到的结果是不一样的；
- **更偏好是用行向量**
- 用矩阵实现坐标系转换时，向量左乘更方便；
- DirectX使用的行向量，OpenGL使用的列向量；

## 5、矩阵的几何意义---变换矩阵（线性变换）

线性变换：不改变直线的方向，原点没有移动；但会改变长度、角度、面积、体积等；但不会发生弯曲、卷折坐标系
常见的线性变换：
- 旋转
- 缩放
- 投影
- 镜像
- 仿射

矩阵是如何变换向量的？

- 向量$\vec{V}(x,y,z)$ 每个元素都可以表示成沿着相应坐标轴的有向位移；
- 例如：$\vec{V} = x\vec{p} + y\vec{q} + z\vec{r}$，向量$\vec{V}$表示成基向量$\vec{p},\vec{q},\vec{r}$ 的线性组合；

三个基向量$\vec{p},\vec{q},\vec{r}$，可以用矩阵表示：
$$
M = 
\left[
\begin{matrix}
    \vec{p}_x & \vec{p}_y &  \vec{p}_z \\
    \vec{q}_x & \vec{q}_y &  \vec{q}_z \\
    \vec{r}_x & \vec{r}_y &  \vec{r}_z \\
\end{matrix}    
\right]\tag{1}
$$

用一个向量$\vec{V}(x,y,z)$ 乘以矩阵$M$
$$
\left[
\begin{matrix}
    x & y & z
\end{matrix}
\right] 
\left[
\begin{matrix}
    \vec{p}_x & \vec{p}_y &  \vec{p}_z \\
    \vec{q}_x & \vec{q}_y &  \vec{q}_z \\
    \vec{r}_x & \vec{r}_y &  \vec{r}_z \\
\end{matrix}    
\right] 
 =  \left[
\begin{matrix}
    x\vec{p_x} + y\vec{q_x} + z\vec{r_x} &  x\vec{p_y} + y\vec{q_y} + z\vec{r_y} & x\vec{p_z} + y\vec{q_z} + z\vec{r_z} 
\end{matrix} 
\right] \\
 = x\vec{p} + y\vec{q} + z\vec{r}\tag{2} 
$$

矩阵的行解释为坐标系的基向量，乘以该矩阵就相当于执行坐标转换；

通过此可以得出结论：
> - 矩阵的每一行，可以解释为坐标系的基向量；
> - 将向量从原坐标系变换到新坐标系，用它乘以一个矩阵；
> - 通过此方式可以反向建立矩阵，构造一种矩阵代表变换；

## 6、矩阵的行列式

任意方阵中都存在一个标量，称为方阵的行列式；

> - 方阵才有行列式，非方阵矩阵的行列式未定义；

- **2 x 2阶矩阵行列式：**
  
$$
 M =
\begin{vmatrix}
   m_{11}  & m_{12} \\
   m_{21}  & m_{22} 
\end{vmatrix}
=  m_{11}m_{12}-m_{21}m_{22}
\tag{1}
$$

- **3 x 3阶矩阵的行列式：**



- **余子式：**

    矩阵M 有r行，c列，从M中取出第i行，第j列后剩下的矩阵，称为矩阵M的余子式；
    表示为 **$M^{\{i,j\}}$**

    例如：矩阵M,去除第1行第二列的结果为：

    $$
    M = \left[
        \begin{matrix}
            -4 & -3 & 3\\
            0 & 2 & -2\\
            1 & -4 & -1
        \end{matrix}
    \right] = M^{\{i,j\}} = 
    \left[
        \begin{matrix}
            0 & -2\\
            1 & -1
        \end{matrix}
    \right]\tag{2}
    $$



- **代数余子式：**

    对于任何**方阵M**,给定行列的代数余子式等于相应余子式的有符号行列式；

    表示形式如下：
    
    $$c_{ij} = (-1)^{i,j}|M^{\{i,j\}}|\tag{3}$$

> - 余子式是矩阵;
> - 代数余子式是标量;
> - 代数余子式中的$(-1)^{ij}$ 项使得矩阵中的每隔一项均为负的效果；

**高阶行列式的求法**

用余子式和代数余子式求解高阶行列式
方法：从矩阵中选择任意一行或者列，对该行或列中元素，都乘以对应的代数余子式，这些乘积的和就是矩阵的行列式；

公式：
    $$|M| = \sum_{j=1}^{n}m_{ij}c_{ij} = \sum_{j=1}^{n}m_{ij}(-1)^{i+j}|M^{\{ij\}}|$$

特殊的计算方法：[主元计算](https://blog.csdn.net/seniusen/article/details/84575131)


**行列式的重要特征**
> - 矩阵积的行列式等于矩阵行列式的积，即$|AB| = |A||B|$,并且可以扩展多个矩阵
> - 矩阵转置的行列式等于原矩阵的行列式$|M|^T = |M|$
> - 如果矩阵中的任意行或列全为0，那么它的行列式为0；
> - 交换矩阵的任意两行或两列，行列式为负；



**行列式的几何意义**

2D:表示两个坐标轴组成平行四边形的有符号面积；
3D:表示三个坐标轴组成立方体的有符号体积；





## 7、矩阵的逆



## 8、正交矩阵



## 9、齐次矩阵



# 二、矩阵和线性变换

## 1、 




# 三、旋转



## 1、2D的旋转
    
2D旋转操作主要是绕某点进行旋转；

标准坐标系：x轴表示为$(1,0)$ ，y轴表示为$(0,1)$

x轴和y轴绕原点旋转一定角度后得到的矩阵为：

$$
\left[
\begin{matrix}
    cos(\theta) & sin(\theta)\\
    -sin(\theta) & cos(\theta)
\end{matrix}
\right]\tag{1}
$$

## 2、3D的旋转

左手坐标系：

右手坐标系：

### 2.1绕坐标轴的旋转（左手坐标系）

- 绕$\vec{x}轴旋转$\theta$角度的旋转矩阵为：

$$
\vec{R} = 
\left[
\begin{matrix}
    1&0&0 \\
    0&cos(\theta) & sin(\theta) \\
    0 & -sin(\theta) & cos(\theta)
\end{matrix}
\right]\tag{1}
$$

- 绕$\vec{y}轴$\theta$角度的旋转矩阵为：

$$
\vec{R} =
\left[
\begin{matrix}
    cons(\theta) & 0 & -sin(\theta)\\
    0 & 1 & 0\\
    sin(\theta) & 0 & cos(\theta) 
\end{matrix}
\right]\tag{2}
$$

- 绕$\vec{z}轴$\theta$角度旋转矩阵为：
  
$$
\vec{R} =
\left[
\begin{matrix}
    cos(\theta) & sin(\theta) & 0\\
    -sin(\theta) & cos(\theta) & 0 \\
    0 & 0 & 1
\end{matrix}
\right]\tag{3}
$$

- 绕任意轴 $\vec{n}$ 旋转$\theta$角度的矩阵
就是得到满足以下条件的矩阵$\vec{R(\vec{n},\theta)}$:
$$
\vec{V}*\vec{R(\vec{n},\theta)} = \vec{V^\prime}
$$